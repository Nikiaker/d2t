{"id": "a9755dfd-d24a-4d37-8031-51db58e22f71", "code": "from dataclasses import dataclass\n\n@dataclass\nclass Triple:\n    subject: str\n    predicate: str\n    object: str\n\n# EVOLVE-BLOCK-START\n\ndef predict(triples: list[Triple]) -> str:\n    \"\"\"\n    Generates a natural language sentence from a list of triples.\n    Groups facts by subject and constructs more coherent, complex sentences.\n    \"\"\"\n    if not triples:\n        return \"\"\n\n    from collections import defaultdict\n    subject_facts = defaultdict(list)\n\n    for triple in triples:\n        subject_facts[triple.subject].append((triple.predicate, triple.object))\n\n    sentences = []\n    for subject, facts in subject_facts.items():\n        # Group facts into meaningful categories with better semantic grouping\n        birth_info = []\n        career_info = []\n        origin_info = []\n        music_info = []\n        other_info = []\n\n        for pred, obj in facts:\n            if pred in (\"birthDate\", \"birthPlace\", \"birthYear\"):\n                if pred == \"birthDate\":\n                    birth_info.append(f\"on {obj}\")\n                elif pred == \"birthPlace\":\n                    birth_info.append(f\"in {obj}\")\n                elif pred == \"birthYear\":\n                    birth_info.append(f\"in {obj}\")\n            elif pred == \"activeYearsStartYear\":\n                career_info.append(f\"since {obj}\")\n            elif pred == \"activeYearsEndYear\":\n                career_info.append(f\"until {obj}\")\n            elif pred in (\"origin\", \"nationality\", \"country\", \"isPartOf\"):\n                origin_info.append(obj)\n            elif pred in (\"genre\", \"musicSubgenre\", \"musicFusionGenre\", \"stylisticOrigin\", \"associatedBand/associatedMusicalArtist\"):\n                music_info.append(obj)\n            elif pred in (\"instrument\", \"background\", \"occupation\", \"professionalField\", \"training\"):\n                other_info.append(obj)\n            elif pred == \"recordLabel\":\n                other_info.append(f\"signed to {obj}\")\n            elif pred == \"deathPlace\":\n                other_info.append(f\"died in {obj}\")\n            elif pred == \"deathDate\":\n                other_info.append(f\"died on {obj}\")\n            elif pred == \"alternativeName\":\n                other_info.append(f\"also known as {obj}\")\n            elif pred == \"capital\":\n                other_info.append(f\"capital is {obj}\")\n            elif pred == \"currency\":\n                other_info.append(f\"currency is {obj}\")\n            elif pred == \"anthem\":\n                other_info.append(f\"anthem is {obj}\")\n            elif pred == \"demonym\":\n                other_info.append(f\"called {obj}\")\n            elif pred == \"areaTotal\":\n                other_info.append(f\"area of {obj}\")\n            elif pred == \"populationDensity\":\n                other_info.append(f\"population density of {obj}\")\n            elif pred == \"elevationAboveTheSeaLevel\":\n                other_info.append(f\"elevation of {obj}\")\n            elif pred == \"postalCode\":\n                other_info.append(f\"postal codes {obj}\")\n            elif pred == \"foundingDate\":\n                other_info.append(f\"founded on {obj}\")\n            elif pred == \"longName\":\n                other_info.append(f\"also known as {obj}\")\n            elif pred == \"meaning\":\n                other_info.append(f\"meaning is {obj}\")\n            elif pred == \"language\":\n                other_info.append(f\"language is {obj}\")\n            elif pred == \"officialLanguage\":\n                other_info.append(f\"official language is {obj}\")\n            elif pred == \"derivative\":\n                other_info.append(f\"derivative of {obj}\")\n            elif pred == \"location\":\n                other_info.append(f\"located in {obj}\")\n            elif pred == \"governingBody\":\n                other_info.append(f\"governed by {obj}\")\n            elif pred == \"leader\":\n                other_info.append(f\"led by {obj}\")\n            elif pred == \"leaderTitle\":\n                other_info.append(f\"leader title {obj}\")\n            elif pred == \"parentCompany\":\n                other_info.append(f\"subordinate to {obj}\")\n            elif pred == \"bandMember\":\n                other_info.append(f\"has {obj} as a band member\")\n            else:\n                # Fallback for unknown predicates\n                predicate_cleaned = pred.replace(\"/\", \" \")\n                other_info.append(f\"{predicate_cleaned} {obj}\")\n\n        # Build descriptive parts with improved flow and grammar\n        parts = []\n        if birth_info:\n            birth_phrase = \", \".join(birth_info)\n            parts.append(f\"born {birth_phrase}\")\n        if career_info:\n            career_phrase = \" to \".join(career_info)\n            parts.append(f\"active {career_phrase}\")\n        if origin_info:\n            origin_str = \", \".join(origin_info)\n            parts.append(f\"from {origin_str}\")\n        if music_info:\n            music_str = \", \".join(music_info)\n            parts.append(f\"playing {music_str} music\")\n        if other_info:\n            other_str = \", \".join(other_info)\n            parts.append(f\"also known for {other_str}\")\n\n        # Construct final sentence with better structure and natural flow\n        if len(parts) == 1:\n            sentence = f\"{subject} {parts[0]}.\"\n        else:\n            sentence = f\"{subject} {', '.join(parts[:-1])} and {parts[-1]}.\"\n        sentences.append(sentence)\n\n    # Combine multiple subject sentences with proper conjunctions\n    if len(sentences) == 1:\n        return sentences[0]\n    elif len(sentences) == 2:\n        return \" and \".join(sentences)\n    elif len(sentences) == 3:\n        return \", \".join(sentences[:-1]) + \", and \" + sentences[-1]\n    else:\n        return \", \".join(sentences)\n\n# EVOLVE-BLOCK-END", "language": "python", "parent_id": "6804d209-fd2b-4bb9-a004-f67cd7363496", "generation": 3, "timestamp": 1770111958.3233192, "iteration_found": 906, "metrics": {"combined_score": 0.0, "error": "'NoneType' object is not iterable"}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 71 lines with 123 lines", "parent_metrics": {"combined_score": 0.0, "error": "'NoneType' object is not iterable"}, "island": 1}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}