{"id": "f5d5731a-e122-47d0-9dd4-33f69a7deee2", "code": "from dataclasses import dataclass\n\n@dataclass\nclass Triple:\n    subject: str\n    predicate: str\n    object: str\n\n# EVOLVE-BLOCK-START\n\ndef predict(triples: list[Triple]) -> str:\n    if not triples:\n        return \"\"\n\n    sentences = []\n    for triple in triples:\n        predicate = triple.predicate.replace(\"/\", \" \")\n        if triple.predicate == \"associatedBand/associatedMusicalArtist\":\n            sentences.append(f\"{triple.subject} is associated with {triple.object}.\")\n        elif triple.predicate == \"birthDate\":\n            sentences.append(f\"{triple.subject} was born on {triple.object}.\")\n        elif triple.predicate == \"genre\":\n            sentences.append(f\"{triple.subject} plays {triple.object} music.\")\n        elif triple.predicate == \"instrument\":\n            sentences.append(f\"{triple.subject} plays the {triple.object}.\")\n        elif triple.predicate == \"origin\":\n            sentences.append(f\"{triple.subject} is from {triple.object}.\")\n        elif triple.predicate == \"activeYearsStartYear\":\n            sentences.append(f\"{triple.subject} began their career in {triple.object}.\")\n        elif triple.predicate == \"birthPlace\":\n            sentences.append(f\"{triple.subject} was born in {triple.object}.\")\n        elif triple.predicate == \"birthYear\":\n            sentences.append(f\"{triple.subject} was born in {triple.object}.\")\n        elif triple.predicate == \"occupation\":\n            sentences.append(f\"{triple.subject} is a {triple.object}.\")\n        elif triple.predicate == \"recordLabel\":\n            sentences.append(f\"{triple.subject} is signed to {triple.object}.\")\n        elif triple.predicate == \"deathPlace\":\n            sentences.append(f\"{triple.subject} died in {triple.object}.\")\n        elif triple.predicate == \"alternativeName\":\n            sentences.append(f\"{triple.subject} is also known as {triple.object}.\")\n        elif triple.predicate == \"activeYearsEndYear\":\n            sentences.append(f\"{triple.subject} retired in {triple.object}.\")\n        elif triple.predicate == \"deathDate\":\n            sentences.append(f\"{triple.subject} died on {triple.object}.\")\n        elif triple.predicate == \"nationality\":\n            sentences.append(f\"{triple.subject} is from {triple.object}.\")\n        elif triple.predicate == \"professionalField\":\n            sentences.append(f\"{triple.subject} works as a {triple.object}.\")\n        elif triple.predicate == \"musicFusionGenre\":\n            sentences.append(f\"{triple.subject} is a fusion of {triple.object}.\")\n        elif triple.predicate == \"musicSubgenre\":\n            sentences.append(f\"{triple.subject} is a subgenre of {triple.object}.\")\n        elif triple.predicate == \"stylisticOrigin\":\n            sentences.append(f\"{triple.subject} originates from {triple.object}.\")\n        elif triple.predicate == \"language\":\n            sentences.append(f\"{triple.object} is spoken in {triple.subject}.\")\n        elif triple.predicate == \"officialLanguage\":\n            sentences.append(f\"{triple.object} is the official language of {triple.subject}.\")\n        elif triple.predicate == \"derivative\":\n            sentences.append(f\"{triple.subject} derives from {triple.object}.\")\n        elif triple.predicate == \"location\":\n            sentences.append(f\"{triple.subject} is located in {triple.object}.\")\n        elif triple.predicate == \"governingBody\":\n            sentences.append(f\"{triple.subject} is governed by {triple.object}.\")\n        elif triple.predicate == \"leader\":\n            sentences.append(f\"{triple.subject} is led by {triple.object}.\")\n        elif triple.predicate == \"leaderTitle\":\n            sentences.append(f\"{triple.subject} has the leader title {triple.object}.\")\n        elif triple.predicate == \"country\":\n            sentences.append(f\"{triple.subject} is located in {triple.object}.\")\n        elif triple.predicate == \"ethnicGroup\":\n            sentences.append(f\"{triple.subject} is an ethnic group of {triple.object}.\")\n        elif triple.predicate == \"parentCompany\":\n            sentences.append(f\"{triple.subject} is a subsidiary of {triple.object}.\")\n        elif triple.predicate == \"bandMember\":\n            sentences.append(f\"{triple.subject} has {triple.object} as a band member.\")\n        elif triple.predicate == \"capital\":\n            sentences.append(f\"{triple.subject} has {triple.object} as its capital.\")\n        elif triple.predicate == \"anthem\":\n            sentences.append(f\"{triple.subject} has {triple.object} as its anthem.\")\n        elif triple.predicate == \"currency\":\n            sentences.append(f\"{triple.subject} uses {triple.object} as its currency.\")\n        elif triple.predicate == \"demonym\":\n            sentences.append(f\"{triple.subject} are called {triple.object}.\")\n        elif triple.predicate == \"isPartOf\":\n            sentences.append(f\"{triple.subject} is part of {triple.object}.\")\n        elif triple.predicate == \"distributingCompany\":\n            sentences.append(f\"{triple.subject} is distributed by {triple.object}.\")\n        elif triple.predicate == \"training\":\n            sentences.append(f\"{triple.subject} trained at {triple.object}.\")\n        elif triple.predicate == \"populationDensity\":\n            sentences.append(f\"{triple.subject} has a population density of {triple.object}.\")\n        elif triple.predicate == \"meaning\":\n            sentences.append(f\"{triple.subject} means {triple.object}.\")\n        elif triple.predicate == \"longName\":\n            sentences.append(f\"{triple.subject} is also known as {triple.object}.\")\n        elif triple.predicate == \"areaTotal\":\n            sentences.append(f\"{triple.subject} has an area of {triple.object}.\")\n        elif triple.predicate == \"foundingDate\":\n            sentences.append(f\"{triple.subject} was founded on {triple.object}.\")\n        elif triple.predicate == \"elevationAboveTheSeaLevel\":\n            sentences.append(f\"{triple.subject} is {triple.object} above sea level.\")\n        elif triple.predicate == \"postalCode\":\n            sentences.append(f\"{triple.subject} has postal codes {triple.object}.\")\n        else:\n            # Handle unknown predicates with a more informative sentence\n            sentence = f\"Information about {triple.subject} and {triple.predicate} relating to {triple.object} is available.\"\n            sentences.append(sentence)\n\n    if len(sentences) == 1:\n        return sentences[0]\n    else:\n        # Group triples by subject to build coherent, multi-fact sentences\n        from collections import defaultdict\n        subject_groups = defaultdict(list)\n        for triple in triples:\n            subject_groups[triple.subject].append(triple)\n\n        sentences = []\n        for subject, group in subject_groups.items():\n            facts = []\n            birth_info = []\n            career_info = []\n            music_info = []\n            affiliation_info = []\n            location_info = []\n            other_info = []\n\n            for triple in group:\n                predicate = triple.predicate\n                object_val = triple.object\n\n                if predicate in [\"birthDate\", \"birthPlace\", \"birthYear\"]:\n                    birth_info.append((predicate, object_val))\n                elif predicate in [\"activeYearsStartYear\", \"activeYearsEndYear\"]:\n                    career_info.append((predicate, object_val))\n                elif predicate in [\"genre\", \"instrument\", \"background\", \"musicSubgenre\", \"musicFusionGenre\", \"stylisticOrigin\"]:\n                    music_info.append((predicate, object_val))\n                elif predicate in [\"recordLabel\", \"associatedBand/associatedMusicalArtist\", \"bandMember\", \"distributingCompany\", \"parentCompany\"]:\n                    affiliation_info.append((predicate, object_val))\n                elif predicate in [\"country\", \"capital\", \"location\", \"isPartOf\", \"postalCode\", \"areaTotal\", \"elevationAboveTheSeaLevel\"]:\n                    location_info.append((predicate, object_val))\n                elif predicate in [\"nationality\", \"occupation\", \"professionalField\", \"alternativeName\", \"demonym\", \"ethnicGroup\"]:\n                    other_info.append((predicate, object_val))\n                elif predicate in [\"deathDate\", \"deathPlace\"]:\n                    # Handle death info separately as it may be part of a narrative\n                    death_info = f\"and died on {object_val}\" if predicate == \"deathDate\" else f\"and died in {object_val}\"\n                    facts.append(death_info)\n                    continue\n                else:\n                    other_info.append((predicate, object_val))\n\n            # Construct natural narrative flow: birth \u2192 career \u2192 music \u2192 affiliations \u2192 location \u2192 other\n            if birth_info:\n                birth_str = \"\"\n                dates = [val for pred, val in birth_info if pred in [\"birthDate\", \"birthYear\"]]\n                places = [val for pred, val in birth_info if pred == \"birthPlace\"]\n                if dates and places:\n                    birth_str = f\"born on {dates[0]} in {places[0]}\"\n                elif dates:\n                    birth_str = f\"born on {dates[0]}\"\n                elif places:\n                    birth_str = f\"born in {places[0]}\"\n                else:\n                    birth_str = \"born\"\n                facts.append(birth_str)\n\n            if career_info:\n                start_year = next((val for pred, val in career_info if pred == \"activeYearsStartYear\"), None)\n                end_year = next((val for pred, val in career_info if pred == \"activeYearsEndYear\"), None)\n                if start_year and end_year:\n                    facts.append(f\"active from {start_year} to {end_year}\")\n                elif start_year:\n                    facts.append(f\"active since {start_year}\")\n                elif end_year:\n                    facts.append(f\"active until {end_year}\")\n\n            if music_info:\n                genre = next((val for pred, val in music_info if pred == \"genre\"), None)\n                instrument = next((val for pred, val in music_info if pred == \"instrument\"), None)\n                background = next((val for pred, val in music_info if pred == \"background\"), None)\n                if genre:\n                    facts.append(f\"performing {genre} music\")\n                if instrument:\n                    facts.append(f\"playing the {instrument}\")\n                if background:\n                    facts.append(f\"with a background as a {background}\")\n\n            if affiliation_info:\n                labels = []\n                for pred, val in affiliation_info:\n                    if pred in [\"recordLabel\", \"distributingCompany\"]:\n                        labels.append(f\"signed to {val}\")\n                    elif pred == \"associatedBand/associatedMusicalArtist\":\n                        labels.append(f\"associated with {val}\")\n                    elif pred == \"bandMember\":\n                        labels.append(f\"member of {val}\")\n                    elif pred == \"parentCompany\":\n                        labels.append(f\"subsidiary of {val}\")\n                    else:\n                        labels.append(val)\n                if labels:\n                    facts.append(f\"affiliated with {', '.join(labels)}\")\n\n            if location_info:\n                locations = []\n                for pred, val in location_info:\n                    if pred in [\"country\", \"capital\", \"isPartOf\"]:\n                        locations.append(f\"in {val}\")\n                    elif pred == \"location\":\n                        locations.append(f\"located in {val}\")\n                    else:\n                        locations.append(val)\n                if locations:\n                    facts.append(f\"located in {', '.join(locations)}\")\n\n            if other_info:\n                others = []\n                for pred, val in other_info:\n                    if pred in [\"nationality\", \"occupation\", \"professionalField\"]:\n                        others.append(val)\n                    elif pred == \"alternativeName\":\n                        others.append(f\"also known as {val}\")\n                    elif pred == \"demonym\":\n                        others.append(f\"people from here are called {val}\")\n                    elif pred == \"ethnicGroup\":\n                        others.append(f\"inhabited by the {val} ethnic group\")\n                    else:\n                        others.append(val)\n                if others:\n                    facts.append(f\"{', '.join(others)}\")\n\n            if facts:\n                sentence = f\"{subject} is {', '.join(facts)}.\"\n                sentences.append(sentence)\n\n        return \" \".join(sentences)\n\n# EVOLVE-BLOCK-END", "language": "python", "parent_id": "a64d418f-6475-4be1-8eb1-8011e3fc7687", "generation": 6, "timestamp": 1770097847.6421804, "iteration_found": 486, "metrics": {"combined_score": 0.0, "error": "'NoneType' object is not iterable"}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 54 lines with 125 lines", "parent_metrics": {"combined_score": 0.0, "error": "'NoneType' object is not iterable"}, "island": 1}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}