{"id": "7f011ee6-cacd-4cfc-87a8-21a4396a78eb", "code": "from dataclasses import dataclass\n\n@dataclass\nclass Triple:\n    subject: str\n    predicate: str\n    object: str\n\n# EVOLVE-BLOCK-START\n\ndef predict(triples: list[Triple]) -> str:\n    subjects = {}\n    for triple in triples:\n        if triple.subject not in subjects:\n            subjects[triple.subject] = {}\n        subjects[triple.subject][triple.predicate] = triple.object\n\n    sentences = []\n    for subject, predicates in subjects.items():\n        sentence = f\"{subject} is a \"\n        first = True\n        for predicate, obj in predicates.items():\n            if predicate == \"genre\":\n                if first:\n                    sentence += f\"{obj} musician\"\n                    first = False\n                else:\n                    sentence += f\", and also performs {obj} music\"\n            elif predicate == \"instrument\":\n                if first:\n                    sentence += f\"{obj} player\"\n                    first = False\n                else:\n                    sentence += f\", and plays the {obj}\"\n            elif predicate == \"occupation\":\n                if first:\n                    sentence += f\"{obj}\"\n                    first = False\n                else:\n                    sentence += f\", with an occupation as {obj}\"\n            elif predicate == \"background\":\n                if first:\n                    sentence += f\"{obj} {subject}\"\n                    first = False\n                else:\n                    sentence += f\", and has a background as {obj}\"\n            elif predicate == \"birthPlace\":\n                sentence += f\", born in {obj}\"\n            elif predicate == \"associatedBand/associatedMusicalArtist\":\n                sentence += f\", associated with the band {obj}\"\n            elif predicate == \"stylisticOrigin\":\n                sentence += f\", which originated from {obj}\"\n            elif predicate == \"derivative\":\n                sentence += f\", and is a derivative of {obj}\"\n            else:\n                sentence += f\", with a {predicate} of {obj}\"\n        sentences.append(sentence)\n\n    # Create a dictionary to store the sentences for each subject\n    subject_sentences = {}\n    for triple in triples:\n        subject = triple.subject\n        if subject not in subject_sentences:\n            subject_sentences[subject] = []\n        # Create a sentence for the current triple\n        if triple.predicate == \"genre\":\n            sentence = f\"{triple.subject} plays {triple.object} music\"\n        elif triple.predicate == \"instrument\":\n            sentence = f\"{triple.subject} plays the {triple.object}\"\n        elif triple.predicate == \"occupation\":\n            sentence = f\"{triple.subject} is a {triple.object}\"\n        elif triple.predicate == \"background\":\n            sentence = f\"{triple.subject} has a background as {triple.object}\"\n        elif triple.predicate == \"birthPlace\":\n            sentence = f\"{triple.subject} was born in {triple.object}\"\n        elif triple.predicate == \"associatedBand/associatedMusicalArtist\":\n            sentence = f\"{triple.subject} is associated with the band {triple.object}\"\n        else:\n            sentence = f\"{triple.subject} has a {triple.predicate} of {triple.object}\"\n        subject_sentences[subject].append(sentence)\n\n    # Combine the sentences for each subject\n    combined_sentences = []\n    for subject, sentences in subject_sentences.items():\n        combined_sentence = sentences[0]\n        for sentence in sentences[1:]:\n            combined_sentence += f\", and {sentence}\"\n        combined_sentences.append(combined_sentence)\n\n    # Combine the sentences for related subjects\n    related_sentences = {}\n    for triple in triples:\n        if triple.predicate == \"associatedBand/associatedMusicalArtist\":\n            band = triple.object\n            for sentence in combined_sentences:\n                if band in sentence:\n                    subject = triple.subject\n                    if subject in related_sentences and sentence != related_sentences[subject]:\n                        related_sentences[subject] = related_sentences[subject] + f\", and is also associated with {sentence.split('associated with the band')[1]}\"\n    for subject, sentence in related_sentences.items():\n        combined_sentences[combined_sentences.index(related_sentences[subject].split(', and is also associated with')[0])] = sentence\n\n    # Try to create a complex sentence from all the given triples\n    if len(combined_sentences) > 1:\n        complex_sentence = combined_sentences[0]\n        for sentence in combined_sentences[1:]:\n            if \"is a\" in sentence:\n                complex_sentence += f\", and {sentence}\"\n            else:\n                complex_sentence += f\", {sentence}\"\n        return complex_sentence + \".\"\n    else:\n        # Create a complex sentence for a single subject with multiple triples\n        subject = triples[0].subject\n        sentence = f\"{subject} \"\n        genres = []\n        instruments = []\n        occupations = []\n        backgrounds = []\n        birth_places = []\n        associated_bands = []\n        record_labels = []\n        for triple in triples:\n            if triple.predicate == \"genre\":\n                genres.append(triple.object)\n            elif triple.predicate == \"instrument\":\n                instruments.append(triple.object)\n            elif triple.predicate == \"occupation\":\n                occupations.append(triple.object)\n            elif triple.predicate == \"background\":\n                backgrounds.append(triple.object)\n            elif triple.predicate == \"birthPlace\":\n                birth_places.append(triple.object)\n            elif triple.predicate == \"associatedBand/associatedMusicalArtist\":\n                associated_bands.append(triple.object)\n            elif triple.predicate == \"recordLabel\":\n                record_labels.append(triple.object)\n        if genres:\n            sentence += f\"is a {', '.join(genres)} musician\"\n        if instruments:\n            sentence += f\" who plays the {', '.join(instruments)}\"\n        if occupations:\n            sentence += f\" and works as a {', '.join(occupations)}\"\n        if backgrounds:\n            sentence += f\" with a background as {', '.join(backgrounds)}\"\n        if birth_places:\n            sentence += f\", born in {', '.join(birth_places)}\"\n        if associated_bands:\n            sentence += f\", and is associated with the bands {', '.join(associated_bands)}\"\n        if record_labels:\n            sentence += f\", and is signed to {', '.join(record_labels)} records\"\n        return sentence + \".\"\n\n# EVOLVE-BLOCK-END", "language": "python", "parent_id": "163fe997-7c71-49c9-8665-6a704be056c6", "generation": 5, "timestamp": 1770870512.8003511, "iteration_found": 502, "metrics": {"combined_score": 0.14515338965070904, "BLUE score": 0.14515338965070904}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 2 lines with 50 lines", "parent_metrics": {"combined_score": 0.17305278451155584, "BLUE score": 0.17305278451155584}, "island": 0}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}