{"id": "2db1ae19-e3e5-4eac-a0b1-26c8cc61cb27", "code": "from dataclasses import dataclass\n\n@dataclass\nclass Triple:\n    subject: str\n    predicate: str\n    object: str\n\n# EVOLVE-BLOCK-START\n\ndef predict(triples: list[Triple]) -> str:\n    subjects = {}\n    for triple in triples:\n        if triple.subject not in subjects:\n            subjects[triple.subject] = []\n        subjects[triple.subject].append((triple.predicate, triple.object))\n\n    sentences = []\n    for subject, predicates in subjects.items():\n        sentence = f\"{subject} \"\n        descriptions = []\n\n        for predicate, obj in predicates:\n            if predicate == \"associatedBand/associatedMusicalArtist\":\n                descriptions.append(f\"is associated with the band {obj}\")\n            elif predicate == \"genre\":\n                descriptions.append(f\"performs in the {obj} genre\")\n            elif predicate == \"instrument\":\n                descriptions.append(f\"plays the {obj}\")\n            elif predicate == \"occupation\":\n                descriptions.append(f\"works as a {obj}\")\n            elif predicate == \"background\":\n                descriptions.append(f\"has a background as a {obj}\")\n            elif predicate == \"birthPlace\":\n                descriptions.append(f\"was born in {obj}\")\n            elif predicate == \"birthDate\":\n                descriptions.append(f\"was born on {obj}\")\n            elif predicate == \"activeYearsStartYear\":\n                descriptions.append(f\"started their career in {obj}\")\n            elif predicate == \"activeYearsEndYear\":\n                descriptions.append(f\"ended their career in {obj}\")\n            elif predicate == \"recordLabel\":\n                descriptions.append(f\"is signed to {obj} records\")\n            elif predicate == \"leaderTitle\":\n                descriptions.append(f\"has a leader title of {obj}\")\n            elif predicate == \"leader\":\n                descriptions.append(f\"has a leader named {obj}\")\n            elif predicate == \"country\":\n                descriptions.append(f\"is located in the country of {obj}\")\n            elif predicate == \"nationality\":\n                descriptions.append(f\"has a nationality of {obj}\")\n            elif predicate == \"deathDate\":\n                descriptions.append(f\"died on {obj}\")\n            elif predicate == \"deathPlace\":\n                descriptions.append(f\"died in {obj}\")\n            else:\n                descriptions.append(f\"has a {predicate} of {obj}\")\n\n        if descriptions:\n            sentence += f\" who {', '.join(descriptions)}.\"\n        else:\n            sentence += \".\"\n\n        sentences.append(sentence)\n\n        # Try to create a complex sentence from all the given triples\n        if len(triples) > 0:\n            subjects = set(triple.subject for triple in triples)\n            if len(subjects) == 1:\n                subject = list(subjects)[0]\n                complex_sentence = f\"{subject} \"\n                descriptions = []\n\n                for triple in triples:\n                    if triple.predicate == \"associatedBand/associatedMusicalArtist\":\n                        descriptions.append(f\"is associated with the band {triple.object}\")\n                    elif triple.predicate == \"genre\":\n                        descriptions.append(f\"performs in the {triple.object} genre\")\n                    elif triple.predicate == \"instrument\":\n                        descriptions.append(f\"plays the {triple.object}\")\n                    elif triple.predicate == \"occupation\":\n                        descriptions.append(f\"works as a {triple.object}\")\n                    elif triple.predicate == \"background\":\n                        descriptions.append(f\"has a background as a {triple.object}\")\n                    elif triple.predicate == \"birthPlace\":\n                        descriptions.append(f\"was born in {triple.object}\")\n                    elif triple.predicate == \"birthDate\":\n                        descriptions.append(f\"was born on {triple.object}\")\n                    elif triple.predicate == \"activeYearsStartYear\":\n                        descriptions.append(f\"started their career in {triple.object}\")\n                    elif triple.predicate == \"activeYearsEndYear\":\n                        descriptions.append(f\"ended their career in {triple.object}\")\n                    elif triple.predicate == \"recordLabel\":\n                        descriptions.append(f\"is signed to {triple.object} records\")\n                    else:\n                        descriptions.append(f\"has a {triple.predicate} of {triple.object}\")\n\n                if descriptions:\n                    complex_sentence += f\" who {', and '.join(descriptions)}.\"\n                else:\n                    complex_sentence += \".\"\n                return complex_sentence\n            else:\n                complex_sentence = \"\"\n                for triple in triples:\n                    if complex_sentence == \"\":\n                        complex_sentence += f\"{triple.subject} {get_description(triple.predicate, triple.object)}\"\n                    else:\n                        complex_sentence += f\", while {triple.subject} {get_description(triple.predicate, triple.object)}\"\n                return complex_sentence + \".\"\n\n        return \"\"\n\n    def get_description(predicate, obj):\n        if predicate == \"associatedBand/associatedMusicalArtist\":\n            return f\"is associated with the band {obj}\"\n        elif predicate == \"genre\":\n            return f\"performs in the {obj} genre\"\n        elif predicate == \"instrument\":\n            return f\"plays the {obj}\"\n        elif predicate == \"occupation\":\n            return f\"works as a {obj}\"\n        elif predicate == \"background\":\n            return f\"has a background as a {obj}\"\n        elif predicate == \"birthPlace\":\n            return f\"was born in {obj}\"\n        elif predicate == \"birthDate\":\n            return f\"was born on {obj}\"\n        elif predicate == \"activeYearsStartYear\":\n            return f\"started their career in {obj}\"\n        elif predicate == \"activeYearsEndYear\":\n            return f\"ended their career in {obj}\"\n        elif predicate == \"recordLabel\":\n            return f\"is signed to {obj} records\"\n        else:\n            return f\"has a {predicate} of {obj}\"\n\n# EVOLVE-BLOCK-END", "language": "python", "parent_id": "1c3a8758-408a-40e4-9f8e-a28f9a03469e", "generation": 9, "timestamp": 1770879210.3613176, "iteration_found": 866, "metrics": {"combined_score": 0.0, "error": "cannot access local variable 'get_description' where it is not associated with a value"}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 18 lines with 71 lines", "parent_metrics": {"combined_score": 0.16067711642624002, "BLUE score": 0.16067711642624002}, "island": 0}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}