{"id": "c4d9471f-5e54-4887-b889-a17617f32181", "code": "from dataclasses import dataclass\n\n@dataclass\nclass Triple:\n    subject: str\n    predicate: str\n    object: str\n\n# EVOLVE-BLOCK-START\n\ndef predict(triples: list[Triple]) -> str:\n    subjects = {}\n    for triple in triples:\n        if triple.subject not in subjects:\n            subjects[triple.subject] = {}\n        subjects[triple.subject][triple.predicate] = triple.object\n\n    sentences = []\n    for subject, predicates in subjects.items():\n        sentence = f\"{subject} is a \"\n        first = True\n        for predicate, obj in predicates.items():\n            if predicate == \"genre\":\n                if first:\n                    sentence += f\"{obj} musician\"\n                    first = False\n                else:\n                    sentence += f\", and also performs {obj} music\"\n            elif predicate == \"instrument\":\n                if first:\n                    sentence += f\"{obj} player\"\n                    first = False\n                else:\n                    sentence += f\", and plays the {obj}\"\n            elif predicate == \"occupation\":\n                if first:\n                    sentence += f\"{obj}\"\n                    first = False\n                else:\n                    sentence += f\", with an occupation as {obj}\"\n            elif predicate == \"background\":\n                if first:\n                    sentence += f\"{obj} {subject}\"\n                    first = False\n                else:\n                    sentence += f\", and has a background as {obj}\"\n            elif predicate == \"birthPlace\":\n                sentence += f\", born in {obj}\"\n            elif predicate == \"associatedBand/associatedMusicalArtist\":\n                sentence += f\", associated with the band {obj}\"\n            elif predicate == \"stylisticOrigin\":\n                sentence += f\", which originated from {obj}\"\n            elif predicate == \"derivative\":\n                sentence += f\", and is a derivative of {obj}\"\n            else:\n                sentence += f\", with a {predicate} of {obj}\"\n        sentences.append(sentence)\n\n    # Create a dictionary to store the sentences for each subject\n    subject_sentences = {}\n    for triple in triples:\n        subject = triple.subject\n        if subject not in subject_sentences:\n            subject_sentences[subject] = []\n        # Create a sentence for the current triple\n        if triple.predicate == \"genre\":\n            sentence = f\"{triple.subject} plays {triple.object} music\"\n        elif triple.predicate == \"instrument\":\n            sentence = f\"{triple.subject} plays the {triple.object}\"\n        elif triple.predicate == \"occupation\":\n            sentence = f\"{triple.subject} is a {triple.object}\"\n        elif triple.predicate == \"background\":\n            sentence = f\"{triple.subject} has a background as {triple.object}\"\n        elif triple.predicate == \"birthPlace\":\n            sentence = f\"{triple.subject} was born in {triple.object}\"\n        elif triple.predicate == \"associatedBand/associatedMusicalArtist\":\n            sentence = f\"{triple.subject} is associated with the band {triple.object}\"\n        else:\n            sentence = f\"{triple.subject} has a {triple.predicate} of {triple.object}\"\n        subject_sentences[subject].append(sentence)\n\n    # Combine the sentences for each subject\n    combined_sentences = []\n    for subject, sentences in subject_sentences.items():\n        combined_sentence = sentences[0]\n        for sentence in sentences[1:]:\n            combined_sentence += f\", and {sentence}\"\n        combined_sentences.append(combined_sentence)\n\n    # Combine the sentences for related subjects\n    related_sentences = {}\n    for triple in triples:\n        if triple.predicate == \"associatedBand/associatedMusicalArtist\":\n            band = triple.object\n            for sentence in combined_sentences:\n                if band in sentence:\n                    subject = triple.subject\n                    if subject in related_sentences and sentence != related_sentences[subject]:\n                        related_sentences[subject] = related_sentences[subject] + f\", and is also associated with {sentence.split('associated with the band')[1]}\"\n    for subject, sentence in related_sentences.items():\n        combined_sentences[combined_sentences.index(related_sentences[subject].split(', and is also associated with')[0])] = sentence\n\n    # Try to create a complex sentence from all the given triples\n    if len(combined_sentences) > 1:\n        complex_sentence = combined_sentences[0].replace('.', '')\n        for sentence in combined_sentences[1:]:\n            subject = sentence.split(' ')[0]\n            rest_of_sentence = ' '.join(sentence.split(' ')[1:]).replace('.', '')\n            if subject in complex_sentence:\n                complex_sentence += f\", and also {rest_of_sentence}\"\n            else:\n                if \"who\" in complex_sentence:\n                    complex_sentence += f\", and {subject} {rest_of_sentence}\"\n                else:\n                    complex_sentence += f\", where {subject} {rest_of_sentence}\"\n        return complex_sentence + \".\"\n    else:\n        # Create a complex sentence for a single triple\n        triple = triples[0]\n        sentence = f\"{triple.subject} is a {triple.object} {triple.predicate}\"\n        if triple.predicate == \"genre\":\n            sentence = f\"{triple.subject} performs in the {triple.object} genre\"\n        elif triple.predicate == \"instrument\":\n            sentence = f\"{triple.subject} plays the {triple.object}\"\n        elif triple.predicate == \"occupation\":\n            sentence = f\"{triple.subject} works as a {triple.object}\"\n        elif triple.predicate == \"background\":\n            sentence = f\"{triple.subject} has a background as a {triple.object}\"\n        elif triple.predicate == \"birthPlace\":\n            sentence = f\"{triple.subject} was born in {triple.object}\"\n        return sentence + \".\"\n\n# EVOLVE-BLOCK-END", "language": "python", "parent_id": "163fe997-7c71-49c9-8665-6a704be056c6", "generation": 5, "timestamp": 1770868041.0908728, "iteration_found": 387, "metrics": {"combined_score": 0.10017436690949841, "BLUE score": 0.10017436690949841}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Change 1: Replace 2 lines with 29 lines", "parent_metrics": {"combined_score": 0.17305278451155584, "BLUE score": 0.17305278451155584}, "island": 0}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}